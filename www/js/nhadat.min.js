var App=angular.module("App","ngAnimate ngTouch ngSanitize ngRoute App.filters App.services App.directives App.controllers ui.bootstrap google-maps".split(" ")).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.when("/login.html",{templateUrl:"html/login.html",controller:"LoginCtrl"});a.when("/update.html",{templateUrl:"html/update.html"});a.when("/account.html",{templateUrl:"html/account.html"});a.when("/diadanh.html",{templateUrl:"html/group.html",controller:"GroupCtrl"});
a.when("/search.html",{templateUrl:"html/search.html",controller:"TypeaheadCtrl"});a.when("/tag/:tagId",{templateUrl:"html/tag.html",controller:"TagCtrl"});a.when("/city/:cityId",{templateUrl:"html/city.html"});a.when("/topic/:topicId",{templateUrl:"html/topic.html"});a.when("/post/:postId*",{templateUrl:"html/post.html"});a.when("/comment/:commentId*",{templateUrl:"html/comment.html"});a.when("/profile/:profileId",{templateUrl:"html/profile.html"});a.when("/contact/:contactId",{templateUrl:"html/contact.html",
controller:"ContactCtrl"});a.when("/sale.html",{templateUrl:"html/sale.html"});a.when("/share.html",{templateUrl:"html/share.html",controller:"ShareCtrl"});a.when("/",{templateUrl:"html/welcome.html",controller:"WelcomeCtrl"});a.when("/404.html",{template:'<div class="flash" ng-show="flash.msg"><div class="alert alert-dismissable alert-danger"><b>L\u1ed7i:</b>Kh\u00f4ng t\u00ecm th\u1ea5y trang b\u1ea1n y\u00eau c\u1ea7u</div></div>'});a.otherwise({redirectTo:"/"});c.defaults.headers.common={"X-Requested-With":"XMLHttpRequest"}}]).config(["$httpProvider",
function(a){a.responseInterceptors.push(["$location","$q","Session","Flash",function(a,c,d,e){var f=function(a){return a},g=function(f){401===f.status&&(d.unset("authenticated"),a.path("#/login.html"),e.show({type:"error",msg:f.data.flash}));return c.reject(f)};return function(a){return a.then(f,g)}}])}]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|file|mailto|tel|sms):/)}]).run(["$templateCache",function(a){a.put("search.html",'<div ng-controller="TypeaheadCtrl"><div class="search"><form class="form-inline"><input ng-change="search()" class="input-xlarge" autocomplete="off" type="text" autofocus placeholder="\u0110\u1ecba danh, ch\u1ee7 \u0111\u1ec1 hay t\u1eeb b\u1ea5t k\u1ef3..." ng-model="keyword" typeahead="v for v in suggests($viewValue) | filter:$viewValue | limitTo:4" require /><div class="icon"><i class="icon-search"></i></div></form></div><div ng-model="results"><div class="classifieds"><div class="column content" ng-repeat="item in results"><div class="one-half"><div class="image"><a href="/post/{{item.id}}.html"><img ng-src="{{item.img}}" alt="{{item.title}}" /></a><div class="tags"><a ng-repeat="(tag,name) in item.tag" class="label btn-tag" href="/tag/{{tag}}.html">{{name| characters:12 :true}}</a></div><div class="price" ng-show="item.meta.price" ng-bind-html="item.meta.price|pricify"></div></div></div><div class="one-half"><p>{{item.text | characters:300 :true}}</p><div class="info"><div class="address" ng-show="item.meta.address">{{item.meta.address}}</div><div class="agent"><b>{{item.user.name}}</b></div><div class="callsms"><a class="btn-call" href="tel:{{item.user.phone}}">G\u1ecdi</a><a class="btn-sms" href="sms:{{item.user.phone}}">Nh\u1eafn tin</a></div></div></div></div></div></div>')}]).run(["$rootScope",
"$location","Auth","Flash",function(a,b,c,d){var e=["#/diadanh.html","#/sale.html","#/share.html","#/update.html","#/account.html"];a.isPath="";a.$on("$routeChangeStart",function(f,g,h){a.isLogin=c.isLoggedIn();a.isMenu=!1;_(e).contains(b.path())&&!a.isLogin&&(a.isPath=b.path(),b.path("#/login.html"),d.show({type:"info",msg:"M\u1ee5c n\u00e0y c\u1ea7n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ti\u1ebfp t\u1ee5c"}))})}]),services=angular.module("App.services",[]).factory("SearchService",["$http",
function(a){var b=function(a){this.items=[];this.busy=!1;this.page=1;this.end=!1;this.search=a||[];this.nextPage()};b.prototype.nextPage=function(){this.end||this.busy||(this.busy=!0,this.end||a.post("http://192.241.221.27/api/search.html",{page:this.page,search:this.search}).success(function(a){if(0<a.length){for(var b=0;b<a.length;b++)this.items.push(a[b]);this.page++}else this.end=!0;this.busy=!1}.bind(this)))};return b}]).factory("TagService",["$http",function(a){var b=function(a){this.items=
[];this.busy=!1;this.page=1;this.end=!1;this.search=a||"";this.nextPage()};b.prototype.nextPage=function(){this.end||this.busy||(this.busy=!0,!this.end&&1<this.search.length&&a.post("http://192.241.221.27/api/search/findtag.html",{page:this.page,keyword:this.search}).success(function(a){if(0<a.length){for(var b=0;b<a.length;b++)this.items.push(a[b]);this.page++}else this.end=!0;this.busy=!1}.bind(this)))};return b}]).factory("Flash",["$rootScope","$timeout",function(a,b){return{show:function(c){a.flash=
c;b(function(){a.flash=""},9E3)},clear:function(){a.flash=""}}}]).factory("Session",function(){return{get:function(a){return localStorage.getItem(a)},set:function(a,b){return localStorage.setItem(a,b)},unset:function(a){return localStorage.removeItem(a)}}}).factory("Auth",["$http","$sanitize","Session","Flash",function(a,b,c,d){var e=function(a){return{user:b(a.user),password:b(a.password)}};return{login:function(b){return a.post("http://192.241.221.27/api/user/login.html",e(b)).success(function(a){c.set("user",
JSON.stringify(a.user));d.show({type:"success",msg:a.flash})}).error(function(a){d.show({type:"danger",msg:a.flash})})},logout:function(){return a.get("http://192.241.221.27/api/user/logout.html").success(function(){c.unset("user");d.show({type:"success",msg:"B\u1ea1n \u0111\u00e3 tho\u00e1t ra an to\u00e0n."})})},update:function(a){c.set("user",JSON.stringify(a))},user:function(){return JSON.parse(c.get("user"))},guest:function(){return a.get("http://192.241.221.27/api/user/guest.html").success(function(a){c.set("guest",
a.user)})},isGuest:function(){return c.get("guest")},isLoggedIn:function(){return c.get("user")}}}]).value("version","\u00a9 2001-2013 nhadat.com").value("domain","http://www.nhadat.com");
angular.module("App.directives",[]).directive("appVersion",["version",function(a){return function(b,c,d){c.text(a)}}]).directive("scrolltop",function(){return{restrict:"EM",template:'<a href="#" class="scroll-top"><i class="icon-chevron-up"></i></a>'}}).directive("mainnav",["$location","$rootScope","Auth",function(a,b,c){return{restrict:"EM",templateUrl:"html/nav.html",controller:["$scope","$element","$attrs",function(b,e,f){b.user=c.user();b.logout=function(){c.logout().success(function(){b.isLogin=
!1;a.path("#/index.html")})};b.navClass=function(b){var c=a.path().substring(1)||"search.html";return b===c?"active":""}}]}}]).directive("slider",function(){return{restrict:"EM",templateUrl:"html/slider.html"}}).directive("comments",function(){return{restrict:"E",templateUrl:"html/comments.html"}}).directive("agent",function(){return{restrict:"EM",templateUrl:"html/agent.html"}}).directive("notice",function(){return{restrict:"EM",templateUrl:"html/notice.html"}}).directive("classifieds",function(){return{restrict:"EM",
templateUrl:"html/classifieds.html"}}).directive("follows",function(){return{restrict:"EM",templateUrl:"html/follows.html"}}).directive("flash",function(){return{restrict:"EM",templateUrl:"html/flash.html"}}).directive("mainpage",["$rootScope",function(a){return{restrict:"EM",template:'<div id="mainpage" ng-view></div>',link:function(b,c,d){c.bind("click",function(){a.isMenu=!1})}}}]).directive("infiniteScroll",["$rootScope","$window","$timeout",function(a,b,c){return{link:function(d,e,f){var g,h,
k,l;b=angular.element(b);k=0;null!=f.infiniteScrollDistance&&d.$watch(f.infiniteScrollDistance,function(a){return k=parseInt(a,10)});l=!0;g=!1;null!=f.infiniteScrollDisabled&&d.$watch(f.infiniteScrollDisabled,function(a){if((l=!a)&&g)return g=!1,h()});h=function(){var c;c=b.height()+b.scrollTop();if((c=e.offset().top+e.height()-c<=b.height()*k)&&l)return a.$$phase?d.$eval(f.infiniteScroll):d.$apply(f.infiniteScroll);if(c)return g=!0};b.on("scroll",h);d.$on("$destroy",function(){return b.off("scroll",
h)});return c(function(){if(f.infiniteScrollImmediateCheck){if(d.$eval(f.infiniteScrollImmediateCheck))return h()}else return h()},0)}}}]).directive("go",["$location",function(a){return function(b,c,d){c.bind("click",function(){a.path(d.go)})}}]).directive("remove",["$http",function(a){return function(b,c,d){c.bind("click",function(){confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a tin n\u00e0y!!!")&&a.post("http://192.241.221.27/api/message/destroy.html",{id:d.remove}).success(function(a){alert("\u0110\u00e3 x\u00f3a th\u00e0nh c\u00f4ng.")}).error(function(a,
b){403===b&&alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.");404===b&&alert("N\u1ed9i dung kh\u00f4ng t\u00ecm th\u1ea5y, x\u00f3a tin th\u1ea5t b\u1ea1i.")})})}}]).directive("report",["$http",function(a){return function(a,c,d){c.bind("click",function(){alert("C\u00e1m \u01a1n b\u1ea1n \u0111\u00e3 b\u00e1o tin.")})}}]).directive("like",["$http",function(a){return function(b,c,d){c.bind("click",function(){a.post("http://192.241.221.27/api/like/create.html",
{like:d.like}).success(function(a){return c.html('<a class="active"><i class="icon-thumbs-up"></i></a> '+a.total)}).error(function(a,b){403===b&&alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")})})}}]).directive("follow",["$http",function(a){return function(b,c,d){c.bind("click",function(){a.post("http://192.241.221.27/api/follow/create.html",{follow:d.follow}).success(function(a){return c.html('<a class="active"><i class="icon-thumbs-up"></i></a> b\u1ea1n v\u00e0 '+
a.total+" ng\u01b0\u1eddi kh\u00e1c")}).error(function(a,b){403===b&&alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")})})}}]).directive("autoGrow",function(){return function(a,b,c){var d=b[0].offsetHeight;a=b.css("paddingLeft");c=b.css("paddingRight");var e=angular.element("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,width:b[0].offsetWidth-parseInt(a||0)-parseInt(c||0),fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),
lineHeight:b.css("lineHeight"),resize:"none"});angular.element(document.body).append(e);a=function(){var a=b.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(a){for(var b=0,c="";b<a.length-1;b++)c+="&nbsp;";return c+" "});e.html(a);b.css("height",Math.max(e[0].offsetHeight+10,d)+"px")};b.bind("keyup keydown keypress change",a);a()}}).directive("uploader",function(){return{restrict:"E",scope:{action:"@"},
controller:["$scope","Auth","Session",function(a,b,c){a.progress=0;a.login=b.isLoggedIn();a.images=[];c.get("files")&&(a.images=JSON.parse(c.get("files")));a.remove=function(b){a.images.splice(b,1);c.set("files",JSON.stringify(a.images))};a.sendFile=function(b){var e=$(b).parents("form");if(""==$(b).val())return!1;e.attr("action",a.action);a.$apply(function(){a.progress=0});e.ajaxSubmit({type:"POST",uploadProgress:function(b,c,d,e){a.$apply(function(){a.progress=e})},error:function(a,b,c,d){e.removeAttr("action")},
success:function(f,g,h,k){$(b).val().split("\\");e.removeAttr("action");a.$apply(function(){if(0<f.images.length)for(var b=0;b<f.images.length;b++)a.images.push(f.images[b]);c.set("files",JSON.stringify(a.images))})}})}}],link:function(a,b,c,d){b.find(".upload").click(function(){b.find('input[type="file"]').click()})},replace:!1,templateUrl:"html/uploader.html"}}).directive("debug",function(){return{restrict:"E",scope:{expression:"=val"},template:"<pre>{{debug(expression)}}</pre>",link:function(a){a.debug=
function(a){return angular.toJson(a,!0)}}}}).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,require:"carousel",templateUrl:"html/carousel.html",scope:{slides:"=",rent:"=",price:"="},controller:["$scope",function(a){a.direction="left";a.currentIndex=0;a.setSlide=function(b){a.currentIndex=b};a.isSlide=function(b){return a.currentIndex===b};a.prev=function(){a.direction="left";a.currentIndex=a.currentIndex<a.slides.length-1?++a.currentIndex:0};a.next=function(){a.direction=
"right";a.currentIndex=0<a.currentIndex?--a.currentIndex:a.slides.length-1}}]}}]).directive("dropdownToggle",["$document","$location",function(a,b){var c=null,d=angular.noop;return{restrict:"CA",link:function(b,f,g){b.$watch("$location.path",function(){d()});f.parent().bind("click",function(){d()});f.bind("click",function(b){var e=f===c;b.preventDefault();b.stopPropagation();c&&d();e||f.hasClass("disabled")||f.prop("disabled")||(f.parent().addClass("open"),c=f,d=function(b){b&&(b.preventDefault(),
b.stopPropagation());a.unbind("click",d);f.parent().removeClass("open");d=angular.noop;c=null},a.bind("click",d))})}}}]);
angular.module("App.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]).filter("unsafe",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("fixbr",function(){return function(a){if(a)return a.replace(/&lt;br(.*?)\/&gt;/g,"<br />")}}).filter("bbcode",function(){return function(a){for(var b=[/\[b\](.*?)\[\/b\]/gi,/\[i\](.*?)\[\/i\]/gi,/\[u\](.*?)\[\/u\]/gi],c=["<strong>$1</strong>","<em>$1</em>",'<span style="text-decoration: underline;">$1</span>'],
d=0;d<b.length;d++)a=a.replace(b[d],c[d]);return a}}).filter("vndong",function(){return function(a){var b=parseInt(a);if(b){for(var b=parseInt(a),c=[" \u0111\u1ed3ng"," ngh\u00ecn \u0111\u1ed3ng"," tri\u1ec7u \u0111\u1ed3ng"," t\u1ef7 \u0111\u1ed3ng"," ngh\u00ecn t\u1ef7 \u0111\u1ed3ng"],d=0;1E3<=b;d++)b/=1E3;return d>=c.length?"S\u1ed1 ti\u1ec1n qu\u00e1 l\u1edbn":b?(b=Math.round(100*b)/100,"~ "+b.toString().replace(".",",")+c[d]):a}return"S\u1ed1 ti\u1ec1n kh\u00f4ng h\u1ee3p l\u1ec7"}}).filter("pricify",
function(){return function(a){a=parseInt(a);if(1E3>a)return a.toString();if(1E5>a)return a=Math.round(1E3*a)/1E3,a.toString()+".000";if(1E6>a||1E9>a)return a=Math.round(a/1E6*100)/100,a.toString()+"<small>TR</small>";a=Math.round(a/1E9*100)/100;return a.toString()+"<small>T\u1ef6</small>"}}).filter("rentify",function(){return function(a){a=parseInt(a);if(1E3>a)return a.toString();if(1E5>a)return a=Math.round(1E3*a)/1E3,a.toString()+".000/th";if(1E6>a||1E9>a)return a=Math.round(a/1E6*100)/100,a.toString()+
"<small>TR</small>/th";a=Math.round(a/1E9*100)/100;return a.toString()+"<small>T\u1ef6</small>/th"}}).filter("characters",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>=b){a=a.substring(0,b);if(c)for(;" "==a.charAt(a.length-1);)a=a.substr(0,a.length-1);else b=a.lastIndexOf(" "),-1!==b&&(a=a.substr(0,b));return a+"..."}return a}}).filter("words",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a){var c=a.split(/\s+/);c.length>b&&(a=c.slice(0,
b).join(" ")+"...")}return a}});
angular.module("App.controllers",[]).controller("IntroCtrl",["$scope","$http","$location","$timeout","Auth",function(a,b,c,d,e){a.intro=["intro/0.jpg","intro/1.jpg","intro/2.jpg"];a.start=function(){e.guest();d(function(){c.path("#/index.html")},1E3)}}]).controller("ShareCtrl",["$scope","$http","$timeout","$location","$rootScope","Session","Flash",function(a,b,c,d,e,f,g){a.steps=["one","two"];a.step=0;a.form={};a.results=[];a.tags=[];a.login=e.isLogin;a.isFirstStep=function(){return 0===a.step};a.isLastStep=
function(){return a.step===a.steps.length-1};a.CurrentStep=function(){return a.steps[a.step]};a.Label=function(){return a.isLastStep()?"\u0110\u0103ng":"Ti\u1ebfp theo"};a.Previous=function(){a.step-=a.isFirstStep()?0:1};a.Next=function(){a.isLastStep()?a.submit():(a.step+=1,1==a.step&&a.Tags())};a.submit=function(){if("undefined"!=typeof a.form.message){if(e.isLogin)return a.form.images=JSON.parse(f.get("files")),b.post("http://192.241.221.27/api/message/create.html",a.form).success(function(a){g.show({type:"success",
msg:"\u0110\u0103ng tin th\u00e0nh c\u00f4ng."});c(function(){d.path("#/comment/"+a.message.id+".html")},500);f.unset("files")}).error(function(a){g.show({type:"danger",msg:a.flash})});alert("B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp.")}else a.step=0,g.show({type:"danger",msg:"B\u1ea1n vui l\u00f2ng nh\u1eadp n\u1ed9i dung \u0111\u1ec3 chia s\u1ebb."})};a.Tags=function(){var c=a.form.message;if(3<c.length)return b.post("http://192.241.221.27/api/message/tags.html",
{content:c}).success(function(b){a.tags=b.tags})};a.toggle=function(b){var c=a.form.tag.indexOf(b);-1<c?a.form.tag.splice(c,1):a.form.tag.push(b)}}]).controller("SaleCtrl",["$scope","$timeout","$log","$http","$location","$rootScope","Flash","Session",function(a,b,c,d,e,f,g,h){a.login=f.isLogin;a.steps="one two three four five six".split(" ");a.step=0;a.busy=!1;a.form={};a.results=[];a.tags=[];a.isFirstStep=function(){return 0===a.step};a.isLastStep=function(){return a.step===a.steps.length-1};a.CurrentStep=
function(){return a.steps[a.step]};a.Label=function(){return a.isLastStep()?"\u0110\u0103ng tin":"Ti\u1ebfp theo"};a.Previous=function(){a.step-=a.isFirstStep()?0:1};a.Next=function(){a.isLastStep()?a.submit():(a.step+=1,1==a.step&&(a.Tags(),a.form.images=JSON.parse(h.get("files"))))};a.center={latitude:10.823099,longitude:106.629664};a.zoom=15;a.markers=[];a.markerLat=null;a.markerLng=null;a.addMarker=function(){a.markers.push({latitude:parseFloat(a.markerLat),longitude:parseFloat(a.markerLng)});
a.markerLat=null;a.markerLng=null};a.geolocationAvailable=navigator.geolocation?!0:!1;a.checkin=function(){a.geolocationAvailable&&navigator.geolocation.getCurrentPosition(function(b){a.center={latitude:b.coords.latitude,longitude:b.coords.longitude};a.position={coords:a.center};a.markers=[];a.markers.push(a.center);a.markerLat=null;a.markerLng=null;a.$apply()},function(){})};a.gmap=function(b){a.center={latitude:b.map[0],longitude:b.map[1]};a.form.local=b.address;b.check&&(a.markers=[],a.markers.push(a.center))};
a.Tags=function(){return d.post("http://192.241.221.27/api/message/tags.html",{content:a.form.message}).success(function(b){a.tags=b.tags})};a.toggle=function(b){var c=a.form.tag.indexOf(b);-1<c?a.form.tag.splice(c,1):a.form.tag.push(b)};a.suggests=function(){var b=a.form.address;6<b.length?a.busy||(a.busy=!0,d.post("http://192.241.221.27/api/address.html",{address:b}).success(function(b){a.results=b.results;a.busy=!1}).error(function(){a.busy=!1})):a.results=[]};a.submit=function(){a.markers.length&&
(a.form.map=a.markers[0].latitude+", "+a.markers[0].longitude);if("undefined"!=typeof a.form.message&&20<=a.form.message.length)return d.post("http://192.241.221.27/api/message/create.html",a.form).success(function(a){g.show({type:"success",msg:"B\u1ea1n \u0111\u00e3 \u0111\u0103ng tin th\u00e0nh c\u00f4ng."});b(function(){e.path("#/post/"+a.message.id+".html")},1E3);h.unset("files")}).error(function(b){a.step=0;g.show({type:"danger",msg:b.flash})});g.show({type:"danger",msg:"N\u1ed9i dung qu\u00e1 ng\u1eafn, \u00edt nh\u1ea5t 20 k\u00fd t\u1ef1."});
a.step=0}}]).controller("WelcomeCtrl",["$scope",function(a){}]).controller("TopicCtrl",["$scope","$http","$routeParams","TagService","Auth",function(a,b,c,d,e){a.isRealEstate=!0;a.isStatus=!0;a.user=e.user();a.isSwitch=function(b){b&&(a.isStatus||(a.isStatus=!0),a.isRealEstate||(a.isRealEstate=!0));return!b};b.post("http://192.241.221.27/api/topic.html",{slug:c.topicId}).success(function(b){a.topic=b.topic;a.results=new d(b.topic.slug)})}]).controller("GroupCtrl",["$scope","$timeout","$log","$http",
"$location","$rootScope","Flash",function(a,b,c,d,e,f,g){a.login=f.isLogin;a.steps="one two three four five six seven".split(" ");a.step=0;a.busy=!1;a.form={};a.results=[];a.tags=[];a.isFirstStep=function(){return 0===a.step};a.isLastStep=function(){return a.step===a.steps.length-1};a.CurrentStep=function(){return a.steps[a.step]};a.Label=function(){return a.isLastStep()?"T\u1ea1o \u0111\u1ecba danh":"Ti\u1ebfp theo"};a.Previous=function(){a.step-=a.isFirstStep()?0:1};a.Next=function(){a.isLastStep()?
a.submit():(1===a.step&&a.Exist(),a.step+=1)};a.center={latitude:10.823099,longitude:106.629664};a.zoom=15;a.markers=[];a.markerLat=null;a.markerLng=null;a.addMarker=function(){a.markers.push({latitude:parseFloat(a.markerLat),longitude:parseFloat(a.markerLng)});a.markerLat=null;a.markerLng=null};a.geolocationAvailable=navigator.geolocation?!0:!1;a.checkin=function(){a.geolocationAvailable&&navigator.geolocation.getCurrentPosition(function(b){a.center={latitude:b.coords.latitude,longitude:b.coords.longitude};
a.position={coords:a.center};a.markers=[];a.markers.push(a.center);a.$apply()},function(){})};a.gmap=function(b){a.center={latitude:b.map[0],longitude:b.map[1]};a.form.local=b.address;b.check&&(a.markers=[],a.markers.push(a.center))};a.Tags=function(b){return d.post("http://192.241.221.27/api/message/tags.html",{content:b}).success(function(b){a.tags=b.tags})};a.Exist=function(){return d.post("http://192.241.221.27/api/group/tags.html",{keyword:a.form.name}).success(function(b){a.items=b.results;
a.form.subdomain=b.slug;a.Domain()})};a.Domain=function(){if(2<a.form.subdomain.length)return d.post("http://192.241.221.27/api/group/domain.html",{domain:a.form.subdomain}).success(function(b){a.success=0===b.results.length?!0:!1});a.success=!1};a.toggle=function(b){var c=a.form.tag.indexOf(b);-1<c?a.form.tag.splice(c,1):a.form.tag.push(b)};a.suggests=function(){var b=a.form.local;6<b.length?a.busy||(a.busy=!0,d.post("http://192.241.221.27/api/address.html",{address:b}).success(function(b){a.results=
b.results;a.busy=!1}).error(function(){a.busy=!1})):a.results=[]};a.submit=function(){a.markers.length&&(a.form.map=a.markers[0].latitude+", "+a.markers[0].longitude);if("undefined"!=typeof a.form.description&&20<=a.form.description.length)return d.post("http://192.241.221.27/api/group/create.html",a.form).success(function(a){g.show({type:"success",msg:"B\u1ea1n \u0111\u00e3 t\u1ea1o \u0111\u1ecba danh th\u00e0nh c\u00f4ng."});b(function(){e.path("#/tag/"+a.group.slug+".html")},1E3)}).error(function(b){a.step=
1;g.show({type:"danger",msg:b.flash})});g.show({type:"danger",msg:"N\u1ed9i dung qu\u00e1 ng\u1eafn, \u00edt nh\u1ea5t 20 k\u00fd t\u1ef1."});a.step=1}}]).controller("TagCtrl",["$scope","$http","$routeParams","TagService","Auth",function(a,b,c,d,e){a.isRealEstate=!0;a.isStatus=!0;a.user=e.user();a.isSwitch=function(b){b&&(a.isStatus||(a.isStatus=!0),a.isRealEstate||(a.isRealEstate=!0));return!b};angular.extend(a,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},
markers:[],zoom:11,longitude:null,latitude:null});b.post("http://192.241.221.27/api/tag.html",{slug:c.tagId}).success(function(b){a.item=b.data;a.results=new d(a.item.slug);a.stats=b.stats;a.center={latitude:parseFloat(a.item.map[0]),longitude:parseFloat(a.item.map[1])};a.position={coords:{latitude:parseFloat(a.item.map[0]),longitude:parseFloat(a.item.map[1])}};a.markers.push(a.center)}).error(function(b,c){404===c&&(a.item=[])})}]).controller("PostCtrl",["$scope","$http","$routeParams","Auth",function(a,
b,c,d){a.login=d.isLoggedIn();a.user=d.user();angular.extend(a,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},markers:[],zoom:15,longitude:null,latitude:null});a.submit=function(c){if(d.isLoggedIn())return b.post("http://192.241.221.27/api/comment/create.html",{msg_id:c,comment:a.form.comment}).success(function(b){a.item.comments.push(b);a.form={}}).error(function(a){alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")});
alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")};b.post("http://192.241.221.27/api/message/read.html",{id:c.postId}).success(function(b){a.item=b;a.item.meta.map&&(a.center={latitude:parseFloat(a.item.meta.map[0]),longitude:parseFloat(a.item.meta.map[1])},a.position={coords:{latitude:parseFloat(a.item.meta.map[0]),longitude:parseFloat(a.item.meta.map[1])}},a.markers.push(a.center))}).error(function(b,c){404===c&&(a.itemitem=[])})}]).controller("TypeaheadCtrl",
["$scope","$http",function(a,b){a.search=function(){1<a.keyword.length&&b.post("http://192.241.221.27/api/search.html",{keyword:a.keyword}).success(function(b){a.results=b}).error(function(b,d){401===d&&(a.results=[])})};a.suggests=function(a){return b.post("/search/typeahead.html",{keyword:a}).then(function(a){return a.data})}}]).controller("ClassifiedCtrl",["$scope","$http","$location","SearchService","Auth",function(a,b,c,d,e){a.isRealEstate=!0;a.isStatus=!0;a.user=e.user();a.isSwitch=function(b){b&&
(a.isStatus||(a.isStatus=!0),a.isRealEstate||(a.isRealEstate=!0));return!b};a.results=new d;b.post("http://192.241.221.27/api/stats.html").success(function(b){a.stats=b.stats})}]).controller("ProfileCtrl",["$scope","$http","$routeParams","SearchService","Auth",function(a,b,c,d,e){a.myInterval=6E4;a.isRealEstate=!0;a.isStatus=!0;a.form={};a.user=e.user();b.post("http://192.241.221.27/profile.html",{username:c.profileId}).success(function(b){a.user=b.user;a.slides=b.slides;a.stats=b.stats;a.results=
new d({uid:b.user.idu})});a.isSwitch=function(b){b&&(a.isStatus||(a.isStatus=!0),a.isRealEstate||(a.isRealEstate=!0));return!b}}]).controller("SliderCtrl",["$scope","$http",function(a,b){a.slides=[];b.post("http://192.241.221.27/api/slider.html").success(function(b){a.slides=b});a.direction="left";a.currentIndex=0;a.setSlide=function(b){a.currentIndex=b};a.isSlide=function(b){return a.currentIndex===b};a.prev=function(){a.direction="left";a.currentIndex=a.currentIndex<a.slides.length-1?++a.currentIndex:
0};a.next=function(){a.direction="right";a.currentIndex=0<a.currentIndex?--a.currentIndex:a.slides.length-1}}]).controller("ContactCtrl",["$scope","$http","$location","$timeout","Flash",function(a,b,c,d,e){a.lastForm={};a.form={};a.disabled=!1;a.submit=function(f){a.lastForm=angular.copy(f);b.post("http://192.241.221.27/api/contact.html",{fullname:a.form.fullname,email:a.form.email,select:a.form.select,message:a.form.message}).success(function(b){a.disabled=!0;d(function(){c.path("#/index.html")},
5E3);e.show({type:"success",msg:b.flash})}).error(function(a){e.show({type:"danger",msg:a.flash})})};a.reset=function(){a.form=angular.copy(a.lastForm)}}]).controller("FollowCtrl",["$scope","$http",function(a,b){b.post("http://192.241.221.27/api/follows.html").success(function(b){a.follows=b})}]).controller("CommentsCtrl",["$scope","$http","$routeParams","Auth","Flash",function(a,b,c,d,e){a.form={};a.login=d.isLoggedIn();a.user=d.user();angular.extend(a,{position:{coords:{latitude:10.823099,longitude:106.629664}},
center:{latitude:0,longitude:0},markers:[],zoom:17,longitude:null,latitude:null});a.submit=function(c){if(d.isLoggedIn())return b.post("http://192.241.221.27/api/comment/create.html",{msg_id:c,comment:a.form.comment}).success(function(b){a.item.comments.push(b);a.form={}}).error(function(a){alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")});alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")};
b.post("http://192.241.221.27/api/message/read.html",{id:c.commentId}).success(function(b){a.item=b;a.item.meta.map&&(a.center={latitude:parseFloat(a.item.meta.map[0]),longitude:parseFloat(a.item.meta.map[1])},a.position={coords:{latitude:parseFloat(a.item.meta.map[0]),longitude:parseFloat(a.item.meta.map[1])}},a.markers.push(a.center))}).error(function(b,c){404===c&&(a.item=[])})}]).controller("LoginCtrl",["$scope","$location","$http","$rootScope","Auth","Flash",function(a,b,c,d,e,f){a.steps=["one",
"two","three","four"];a.step=0;a.credentials={user:"",password:""};a.isFirstStep=function(){return 0===a.step};a.isLastStep=function(){return a.step===a.steps.length-1};a.CurrentStep=function(){return a.steps[a.step]};a.NextLabel=function(){return a.isLastStep()?"\u0110\u0103ng nh\u1eadp":a.isFirstStep()?"Ti\u1ebfp t\u1ee5c":"X\u00e1c nh\u1eadn"};a.Previous=function(){a.step=0};a.Next=function(){a.isFirstStep()?a.email_or_phone():3<a.credentials.password.length&&a.login()};a.email_or_phone=function(){c.post("http://192.241.221.27/api/user/status.html",
{user:a.credentials.user}).success(function(b){a.step=a.steps.length-1}).error(function(b,c){404==c?"phone"==b.user?a.step=1:"email"==b.user&&(a.step=2):(a.step=0,f.show({type:"danger",msg:"Email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\u00f4ng h\u1ee3p l\u1ec7."}))})};a.login=function(){e.login(a.credentials).success(function(){d.isPath?(b.path(d.isPath),d.isPath=""):b.path("#/index.html")}).error(function(){a.step=0})}}]).controller("AccountCtrl",["$scope","$http","$location","$timeout","Auth",
"Flash",function(a,b,c,d,e,f){a.steps=["one","two","three","four"];a.step=0;a.form=e.user();a.isFirstStep=function(){return 0===a.step};a.isLastStep=function(){return a.step===a.steps.length-1};a.CurrentStep=function(){return a.steps[a.step]};a.NextLabel=function(){return a.isLastStep()?"C\u1eadp nh\u1eadp":"Ti\u1ebfp t\u1ee5c"};a.Previous=function(){a.step-=1};a.Next=function(){a.isLastStep()?a.update():a.step+=1};a.update=function(){if(e.isLoggedIn())return b.post("http://192.241.221.27/api/user/update.html",
a.form).success(function(a){e.update(a.user);f.show({type:"success",msg:a.flash});d(function(){c.path("#/")},500)}).error(function(b){a.step=0;f.show({type:"danger",msg:b.flash})});alert("B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp.")}}]).animation(".slide-animation",function(){return{addClass:function(a,b,c){var d=a.scope();"ng-hide"==b?(b=a.parent().width(),"right"!==d.direction&&(b=-b),TweenMax.to(a,0.5,{left:b,onComplete:c})):c()},removeClass:function(a,
b,c){var d=a.scope();"ng-hide"==b?(a.removeClass("ng-hide"),b=a.parent().width(),"right"===d.direction&&(b=-b),TweenMax.set(a,{left:b}),TweenMax.to(a,0.5,{left:0,onComplete:c})):c()}}});
