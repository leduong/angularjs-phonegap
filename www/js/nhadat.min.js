var App = angular.module("App", "ngAnimate ngTouch ngSanitize ngRoute App.filters App.services App.directives App.controllers ui.bootstrap google-maps".split(" ")).value("version", "\u00a9 2001-2014 nhadat.com").value("Domain", "http://nhadat.com").config(["$routeProvider", "$locationProvider", "$httpProvider",
	function(a, b, d) {
		a.when("/intro.html", {
			templateUrl: "html/intro.html",
			controller: "IntroCtrl"
		});
		a.when("/login.html", {
			templateUrl: "html/login.html",
			controller: "LoginCtrl"
		});
		a.when("/update.html", {
			templateUrl: "html/update.html"
		});
		a.when("/newpassword.html", {
			templateUrl: "html/newpassword.html"
		});
		a.when("/account.html", {
			templateUrl: "html/account.html"
		});
		a.when("/diadanh.html", {
			templateUrl: "html/group.html",
			controller: "GroupCtrl"
		});
		a.when("/search.html", {
			templateUrl: "html/search.html",
			controller: "TypeaheadCtrl"
		});
		a.when("/tag/:tagId", {
			templateUrl: "html/tag.html",
			controller: "TagCtrl"
		});
		a.when("/post/:postId*", {
			templateUrl: "html/post.html"
		});
		a.when("/comment/:commentId*", {
			templateUrl: "html/comment.html"
		});
		a.when("/profile/:profileId", {
			templateUrl: "html/profile.html"
		});
		a.when("/map/:mapId*", {
			templateUrl: "html/map.html"
		});
		a.when("/contact/:contactId", {
			templateUrl: "html/contact.html",
			controller: "ContactCtrl"
		});
		a.when("/sale.html", {
			templateUrl: "html/sale.html"
		});
		a.when("/share.html", {
			templateUrl: "html/share.html",
			controller: "ShareCtrl"
		});
		a.when("/welcome.html", {
			templateUrl: "html/welcome.html",
			controller: "WelcomeCtrl"
		});
		a.when("/404.html", {
			template: '<div class="flash" ng-show="flash.msg"><div class="alert alert-dismissable alert-danger"><b>L\u1ed7i:</b>Kh\u00f4ng t\u00ecm th\u1ea5y trang b\u1ea1n y\u00eau c\u1ea7u</div></div>'
		});
		a.otherwise({
			redirectTo: "/welcome.html"
		});
		b.html5Mode(!1);
		d.defaults.headers.common = {
			"X-Requested-With": "XMLHttpRequest"
		}
	}
]).config(["$httpProvider",
	function(a) {
		a.responseInterceptors.push(["$location", "$q", "Session", "Flash",
			function(a, d, c, e) {
				var f = function(a) {
					return a
				}, g = function(g) {
						401 === g.status && (c.unset("authenticated"), a.path("#/login.html"), e.show({
							type: "error",
							msg: g.data.flash
						}));
						return d.reject(g)
					};
				return function(a) {
					return a.then(f, g)
				}
			}
		])
	}
]).config(["$compileProvider",
	function(a) {
		a.aHrefSanitizationWhitelist(/^\s*(https?|file|mailto|tel|sms):/)
	}
]).run(["$rootScope",
	"$location", "Auth", "Flash",
	function(a, b, d, c) {
		var e = ["#/diadanh.html", "#/sale.html", "#/share.html", "#/update.html", "#/account.html"],
			f = ["#/diadanh.html", "#/sale.html"];
		a.isPath = "";
		a.$on("$routeChangeStart", function(g, h, k) {
			a.isLogin = d.isLoggedIn();
			a.User = d.user();
			a.isMenu = !1;
			_(e).contains(b.path()) && !a.isLogin && (a.isPath = b.path(), b.path("#/login.html"), c.show({
				type: "info",
				msg: "M\u1ee5c n\u00e0y c\u1ea7n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ti\u1ebfp t\u1ee5c."
			}));
			!_(f).contains(b.path()) ||
				a.User.phone && a.User.first_name || (b.path("#/update.html"), c.show({
					type: "info",
					msg: "\u0110\u1ec3 rao \u0111\u0103ng b\u1ea1n c\u1ea7n ph\u1ea3i c\u1eadp nh\u1eadp t\u00ean v\u00e0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."
				}))
		})
	}
]),
	services = angular.module("App.services", []).factory("cordovaReady", ["$q",
		function(a) {
			var b = angular.element(document);
			a = a.defer();
			var d = a.promise;
			if (!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)) b.on("ready", function() {
				b.triggerHandler("deviceready")
			});
			b.on("deviceready", a.resolve);
			window.device && b.triggerHandler("deviceready");
			return function(a, b) {
				d.then(function() {
					a.apply(a, b)
				})
			}
		}
	]).factory("SearchService", ["$http", "Domain",
		function(a, b) {
			var d = function(a) {
				this.items = [];
				this.busy = !1;
				this.page = 1;
				this.end = !1;
				this.search = a || [];
				this.nextPage()
			};
			d.prototype.nextPage = function() {
				this.end || this.busy || (this.busy = !0, this.end || a.post(b + "/api/search.html", {
					page: this.page,
					search: this.search
				}).success(function(a) {
					if (0 < a.length) {
						for (var b = 0; b < a.length; b++) this.items.push(a[b]);
						this.page++
					} else this.end = !0;
					this.busy = !1
				}.bind(this)))
			};
			return d
		}
	]).factory("TagService", ["$http", "Domain",
		function(a, b) {
			var d = function(a) {
				this.items = [];
				this.busy = !1;
				this.page = 1;
				this.end = !1;
				this.search = a || "";
				this.nextPage()
			};
			d.prototype.nextPage = function() {
				this.end || this.busy || (this.busy = !0, !this.end && 1 < this.search.length && a.post(b + "/api/search/findtag.html", {
					page: this.page,
					keyword: this.search
				}).success(function(a) {
					if (0 < a.length) {
						for (var b = 0; b < a.length; b++) this.items.push(a[b]);
						this.page++
					} else this.end = !0;
					this.busy = !1
				}.bind(this)))
			};
			return d
		}
	]).factory("Flash", ["$rootScope", "$timeout",
		function(a, b) {
			return {
				show: function(d) {
					a.flash = d;
					b(function() {
						a.flash = ""
					}, 9E3)
				},
				clear: function() {
					a.flash = ""
				}
			}
		}
	]).factory("Session", function() {
		return {
			get: function(a) {
				return localStorage.getItem(a)
			},
			set: function(a, b) {
				return localStorage.setItem(a, b)
			},
			unset: function(a) {
				return localStorage.removeItem(a)
			}
		}
	}).factory("Storage", function() {
		return {
			get: function(a) {
				return localStorage.getItem(a)
			},
			set: function(a, b) {
				return localStorage.setItem(a,
					b)
			},
			unset: function(a) {
				return localStorage.removeItem(a)
			}
		}
	}).factory("Auth", ["$http", "$sanitize", "Session", "Flash", "Domain",
		function(a, b, d, c, e) {
			var f = function(a) {
				return {
					user: b(a.user),
					password: b(a.password)
				}
			};
			return {
				login: function(b) {
					return a.post(e + "/api/user/login.html", f(b)).success(function(a) {
						d.set("user", JSON.stringify(a.user));
						c.show({
							type: "success",
							msg: a.flash
						})
					}).error(function(a) {
						c.show({
							type: "danger",
							msg: a.flash
						})
					})
				},
				logout: function() {
					return a.get(e + "/api/user/logout.html").success(function() {
						d.unset("user");
						c.show({
							type: "success",
							msg: "B\u1ea1n \u0111\u00e3 tho\u00e1t ra an to\u00e0n."
						})
					})
				},
				update: function(a) {
					d.set("user", JSON.stringify(a))
				},
				user: function() {
					return JSON.parse(d.get("user"))
				},
				sendmail: function(b) {
					return a.post(e + "/api/user/sendmail.html", f(b)).success(function(a) {
						c.show({
							type: "success",
							msg: a.flash
						})
					}).error(function(a) {
						c.show({
							type: "danger",
							msg: a.flash
						})
					})
				},
				guest: function() {
					return a.get(e + "/api/user/guest.html").success(function(a) {
						d.set("guest", a.user)
					})
				},
				isGuest: function() {
					return d.get("guest")
				},
				isLoggedIn: function() {
					return d.get("user")
				}
			}
		}
	]);
angular.module("App.directives", []).directive("appVersion", ["version",
	function(a) {
		return function(b, d, c) {
			d.text(a)
		}
	}
]).directive("scrolltop", function() {
	return {
		restrict: "EM",
		template: '<a href="#" class="scroll-top"><i class="icon-chevron-up"></i></a>'
	}
}).directive("mainnav", ["$location", "$rootScope", "Auth",
	function(a, b, d) {
		return {
			restrict: "EM",
			templateUrl: "html/nav.html",
			controller: ["$scope", "$element", "$attrs",
				function(b, e, f) {
					b.logout = function() {
						d.logout().success(function() {
							b.isLogin = !1;
							a.path("#/welcome.html")
						})
					};
					b.navClass = function(b) {
						var c = a.path().substring(1) || "search.html";
						return b === c ? "active" : ""
					}
				}
			]
		}
	}
]).directive("slider", function() {
	return {
		restrict: "EM",
		templateUrl: "html/slider.html"
	}
}).directive("comments", function() {
	return {
		restrict: "E",
		templateUrl: "html/comments.html"
	}
}).directive("agent", function() {
	return {
		restrict: "EM",
		templateUrl: "html/agent.html"
	}
}).directive("notice", function() {
	return {
		restrict: "EM",
		templateUrl: "html/notice.html"
	}
}).directive("classifieds", function() {
	return {
		restrict: "EM",
		templateUrl: "html/classifieds.html"
	}
}).directive("follows",
	function() {
		return {
			restrict: "EM",
			templateUrl: "html/follows.html"
		}
	}).directive("flash", function() {
	return {
		restrict: "EM",
		templateUrl: "html/flash.html"
	}
}).directive("mainpage", ["$rootScope",
	function(a) {
		return {
			restrict: "EM",
			template: '<div id="mainpage" ng-view ng-click="isMenu = false"></div>'
		}
	}
]).directive("infiniteScroll", ["$rootScope", "$window", "$timeout",
	function(a, b, d) {
		return {
			link: function(c, e, f) {
				var g, h, k, l;
				b = angular.element(b);
				k = 0;
				null != f.infiniteScrollDistance && c.$watch(f.infiniteScrollDistance,
					function(a) {
						return k = parseInt(a, 10)
					});
				l = !0;
				g = !1;
				null != f.infiniteScrollDisabled && c.$watch(f.infiniteScrollDisabled, function(a) {
					if ((l = !a) && g) return g = !1, h()
				});
				h = function() {
					var d;
					d = b.height() + b.scrollTop();
					if ((d = e.offset().top + e.height() - d <= b.height() * k) && l) return a.$$phase ? c.$eval(f.infiniteScroll) : c.$apply(f.infiniteScroll);
					if (d) return g = !0
				};
				b.on("scroll", h);
				c.$on("$destroy", function() {
					return b.off("scroll", h)
				});
				return d(function() {
						if (f.infiniteScrollImmediateCheck) {
							if (c.$eval(f.infiniteScrollImmediateCheck)) return h()
						} else return h()
					},
					0)
			}
		}
	}
]).directive("goClick", ["$location",
	function(a) {
		return function(b, d, c) {
			var e;
			c.$observe("goClick", function(a) {
				e = a
			});
			d.bind("click", function() {
				b.$apply(function() {
					a.path(e)
				})
			})
		}
	}
]).directive("remove", ["$http", "Domain",
	function(a, b) {
		return function(d, c, e) {
			c.bind("click", function() {
				confirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a tin n\u00e0y!!!") && a.post(b + "/api/message/destroy.html", {
					id: e.remove
				}).success(function(a) {
					alert("\u0110\u00e3 x\u00f3a th\u00e0nh c\u00f4ng.")
				}).error(function(a,
					b) {
					403 === b && alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.");
					404 === b && alert("N\u1ed9i dung kh\u00f4ng t\u00ecm th\u1ea5y, x\u00f3a tin th\u1ea5t b\u1ea1i.")
				})
			})
		}
	}
]).directive("report", ["$http", "Domain",
	function(a, b) {
		return function(a, b, e) {
			b.bind("click", function() {
				alert("C\u00e1m \u01a1n b\u1ea1n \u0111\u00e3 b\u00e1o tin.")
			})
		}
	}
]).directive("like", ["$http", "Domain",
	function(a, b) {
		return function(d, c, e) {
			c.bind("click", function() {
				a.post(b +
					"/api/like/create.html", {
						like: e.like
					}).success(function(a) {
					return c.html('<a class="active"><i class="icon-thumbs-up"></i></a> ' + a.total)
				}).error(function(a, b) {
					403 === b && alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
				})
			})
		}
	}
]).directive("follow", ["$http", "Domain",
	function(a, b) {
		return function(d, c, e) {
			c.bind("click", function() {
				a.post(b + "/api/follow/create.html", {
					follow: e.follow
				}).success(function(a) {
					return c.html('<a class="active"><i class="icon-thumbs-up"></i></a> b\u1ea1n v\u00e0 ' +
						a.total + " ng\u01b0\u1eddi kh\u00e1c")
				}).error(function(a, b) {
					403 === b && alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
				})
			})
		}
	}
]).directive("autoGrow", function() {
	return function(a, b, d) {
		var c = b[0].offsetHeight;
		a = b.css("paddingLeft");
		d = b.css("paddingRight");
		var e = angular.element("<div></div>").css({
			position: "absolute",
			top: -1E4,
			left: -1E4,
			width: b[0].offsetWidth - parseInt(a || 0) - parseInt(d || 0),
			fontSize: b.css("fontSize"),
			fontFamily: b.css("fontFamily"),
			lineHeight: b.css("lineHeight"),
			resize: "none"
		});
		angular.element(document.body).append(e);
		a = function() {
			var a = b.val().replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/&/g, "&amp;").replace(/\n$/, "<br/>&nbsp;").replace(/\n/g, "<br/>").replace(/\s{2,}/g, function(a) {
				for (var b = 0, c = ""; b < a.length - 1; b++) c += "&nbsp;";
				return c + " "
			});
			e.html(a);
			b.css("height", Math.max(e[0].offsetHeight + 10, c) + "px")
		};
		b.bind("keyup keydown keypress change", a);
		a()
	}
}).directive("uploader", function() {
	return {
		restrict: "E",
		scope: {
			action: "@"
		},
		controller: ["$scope", "Auth", "Session",
			function(a, b, d) {
				a.progress = 0;
				a.login = b.isLoggedIn();
				a.images = [];
				d.get("files") && (a.images = JSON.parse(d.get("files")));
				a.remove = function(b) {
					a.images.splice(b, 1);
					d.set("files", JSON.stringify(a.images))
				};
				a.sendFile = function(b) {
					var e = $(b).parents("form");
					if ("" == $(b).val()) return !1;
					e.attr("action", a.action);
					a.$apply(function() {
						a.progress = 0
					});
					e.ajaxSubmit({
						type: "POST",
						uploadProgress: function(b, c, d, e) {
							a.$apply(function() {
								a.progress = e
							})
						},
						error: function(a, b, c, d) {
							e.removeAttr("action")
						},
						success: function(f, g, h, k) {
							$(b).val().split("\\");
							e.removeAttr("action");
							a.$apply(function() {
								if (0 < f.images.length)
									for (var b = 0; b < f.images.length; b++) a.images.push(f.images[b]);
								d.set("files", JSON.stringify(a.images))
							})
						}
					})
				}
			}
		],
		link: function(a, b, d, c) {
			b.find(".upload").click(function() {
				b.find('input[type="file"]').click()
			})
		},
		replace: !1,
		templateUrl: "html/uploader.html"
	}
}).directive("debug", function() {
	return {
		restrict: "E",
		scope: {
			expression: "=val"
		},
		template: "<pre>{{debug(expression)}}</pre>",
		link: function(a) {
			a.debug =
				function(a) {
					return angular.toJson(a, !0)
			}
		}
	}
}).directive("imgMap", function() {
	return {
		restrict: "E",
		scope: {
			markers: "="
		},
		link: function(a, b, d, c) {
			a.$watch("markers", function() {
				"undefined" != typeof a.markers.latitude && $(b).html('<img class="img-responsive" src="//maps.googleapis.com/maps/api/staticmap?center=' + a.markers.latitude + "," + a.markers.longitude + "&markers=" + a.markers.latitude + "," + a.markers.longitude + '&zoom=15&size=640x160&sensor=false" alt="" />')
			})
		}
	}
}).directive("carousel", [
	function() {
		return {
			restrict: "EA",
			transclude: !0,
			replace: !0,
			require: "carousel",
			templateUrl: "html/carousel.html",
			scope: {
				slides: "=",
				rent: "=",
				price: "="
			},
			controller: ["$scope",
				function(a) {
					a.direction = "left";
					a.currentIndex = 0;
					a.setSlide = function(b) {
						a.currentIndex = b
					};
					a.isSlide = function(b) {
						return a.currentIndex === b
					};
					a.prev = function() {
						a.direction = "left";
						a.currentIndex = a.currentIndex < a.slides.length - 1 ? ++a.currentIndex : 0
					};
					a.next = function() {
						a.direction = "right";
						a.currentIndex = 0 < a.currentIndex ? --a.currentIndex : a.slides.length - 1
					}
				}
			]
		}
	}
]).directive("dropdownToggle", ["$document", "$location",
	function(a, b) {
		var d = null,
			c = angular.noop;
		return {
			restrict: "CA",
			link: function(b, f, g) {
				b.$watch("$location.path", function() {
					c()
				});
				f.parent().bind("click", function() {
					c()
				});
				f.bind("click", function(b) {
					var e = f === d;
					b.preventDefault();
					b.stopPropagation();
					d && c();
					e || f.hasClass("disabled") || f.prop("disabled") || (f.parent().addClass("open"), d = f, c = function(b) {
						b && (b.preventDefault(), b.stopPropagation());
						a.unbind("click", c);
						f.parent().removeClass("open");
						c = angular.noop;
						d = null
					}, a.bind("click",
						c))
				})
			}
		}
	}
]);
angular.module("App.filters", []).filter("unsafe", ["$sce",
	function(a) {
		return function(b) {
			return a.trustAsHtml(b)
		}
	}
]).filter("fixbr", function() {
	return function(a) {
		if (a) return a.replace(/&lt;br(.*?)\/&gt;/g, "<br />")
	}
}).filter("bbcode", function() {
	return function(a) {
		for (var b = [/\[b\](.*?)\[\/b\]/gi, /\[i\](.*?)\[\/i\]/gi, /\[u\](.*?)\[\/u\]/gi], d = ["<strong>$1</strong>", "<em>$1</em>", '<span style="text-decoration: underline;">$1</span>'], c = 0; c < b.length; c++) a = a.replace(b[c], d[c]);
		return a
	}
}).filter("vndong", function() {
	return function(a) {
		var b =
			parseInt(a);
		if (b) {
			for (var b = parseInt(a), d = [" \u0111\u1ed3ng", " ngh\u00ecn \u0111\u1ed3ng", " tri\u1ec7u \u0111\u1ed3ng", " t\u1ef7 \u0111\u1ed3ng", " ngh\u00ecn t\u1ef7 \u0111\u1ed3ng"], c = 0; 1E3 <= b; c++) b /= 1E3;
			return c >= d.length ? "S\u1ed1 ti\u1ec1n qu\u00e1 l\u1edbn" : b ? (b = Math.round(100 * b) / 100, "~ " + b.toString().replace(".", ",") + d[c]) : a
		}
		return "S\u1ed1 ti\u1ec1n kh\u00f4ng h\u1ee3p l\u1ec7"
	}
}).filter("pricify", function() {
	return function(a) {
		a = parseInt(a);
		if (1E3 > a) return a.toString();
		if (1E5 > a) return a = Math.round(1E3 *
			a) / 1E3, a.toString() + ".000";
		if (1E6 > a || 1E9 > a) return a = Math.round(a / 1E6 * 100) / 100, a.toString() + "<small>TR</small>";
		a = Math.round(a / 1E9 * 100) / 100;
		return a.toString() + "<small>T\u1ef6</small>"
	}
}).filter("rentify", function() {
	return function(a) {
		a = parseInt(a);
		if (1E3 > a) return a.toString();
		if (1E5 > a) return a = Math.round(1E3 * a) / 1E3, a.toString() + ".000/th";
		if (1E6 > a || 1E9 > a) return a = Math.round(a / 1E6 * 100) / 100, a.toString() + "<small>TR</small>/th";
		a = Math.round(a / 1E9 * 100) / 100;
		return a.toString() + "<small>T\u1ef6</small>/th"
	}
}).filter("characters",
	function() {
		return function(a, b, d) {
			if (isNaN(b)) return a;
			if (0 >= b) return "";
			if (a && a.length >= b) {
				a = a.substring(0, b);
				if (d)
					for (;
						" " == a.charAt(a.length - 1);) a = a.substr(0, a.length - 1);
				else b = a.lastIndexOf(" "), -1 !== b && (a = a.substr(0, b));
				return a + "..."
			}
			return a
		}
	}).filter("words", function() {
	return function(a, b) {
		if (isNaN(b)) return a;
		if (0 >= b) return "";
		if (a) {
			var d = a.split(/\s+/);
			d.length > b && (a = d.slice(0, b).join(" ") + "...")
		}
		return a
	}
}).filter("tel", function() {
	return function(a) {
		if (!a) return "";
		var b = a.toString().trim().replace(/[^\d]/g,
			"");
		if (b.match(/[^0-9]/)) return a;
		var d;
		switch (b.length) {
			case 10:
				a = "";
				d = b.slice(0, 3);
				b = b.slice(3);
				break;
			case 11:
				"84" == b.slice(0, 2) ? (a = "+84", d = b.slice(0, 5).slice(2), b = b.slice(5)) : (a = "", d = b.slice(0, 4), b = b.slice(4));
				break;
			case 12:
				a = "+" + b.slice(0, 2);
				d = b.slice(0, 5).slice(2);
				b = b.slice(5);
				break;
			default:
				return a
		}
		b = b.slice(0, 3) + "-" + b.slice(3);
		return (a + " (" + d + ") " + b).trim()
	}
});
angular.module("App.controllers", []).controller("IntroCtrl", ["$scope", "$http", "$location", "$timeout", "Auth",
	function(a, b, d, c, e) {
		a.intro = ["intro/0.jpg", "intro/1.jpg", "intro/2.jpg"];
		a.start = function() {
			e.guest();
			c(function() {
				d.path("#/welcome.html")
			}, 1E3)
		}
	}
]).controller("ShareCtrl", ["$scope", "$http", "$timeout", "$location", "$rootScope", "Session", "Flash", "Domain",
	function(a, b, d, c, e, f, g, h) {
		a.steps = ["one", "two"];
		a.step = 0;
		a.form = {};
		a.results = [];
		a.tags = [];
		a.login = e.isLogin;
		a.isFirstStep = function() {
			return 0 ===
				a.step
		};
		a.isLastStep = function() {
			return a.step === a.steps.length - 1
		};
		a.CurrentStep = function() {
			return a.steps[a.step]
		};
		a.Label = function() {
			return a.isLastStep() ? "\u0110\u0103ng" : "Ti\u1ebfp theo"
		};
		a.Previous = function() {
			a.step -= a.isFirstStep() ? 0 : 1
		};
		a.Next = function() {
			a.isLastStep() ? a.submit() : (a.step += 1, 1 == a.step && a.Tags())
		};
		a.submit = function() {
			if ("undefined" != typeof a.form.message) {
				if (e.isLogin) return a.form.images = JSON.parse(f.get("files")), b.post(h + "/api/message/create.html", a.form).success(function(a) {
					g.show({
						type: "success",
						msg: "\u0110\u0103ng tin th\u00e0nh c\u00f4ng."
					});
					d(function() {
						c.path("#/comment/" + a.message.id + ".html")
					}, 500);
					f.unset("files")
				}).error(function(a) {
					g.show({
						type: "danger",
						msg: a.flash
					})
				});
				alert("B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp.")
			} else a.step = 0, g.show({
				type: "danger",
				msg: "B\u1ea1n vui l\u00f2ng nh\u1eadp n\u1ed9i dung \u0111\u1ec3 chia s\u1ebb."
			})
		};
		a.Tags = function() {
			var c = a.form.message;
			if (3 < c.length) return b.post(h + "/api/message/tags.html", {
				content: c
			}).success(function(b) {
				a.tags =
					b.tags
			})
		};
		a.toggle = function(b) {
			var c = a.form.tag.indexOf(b); - 1 < c ? a.form.tag.splice(c, 1) : a.form.tag.push(b)
		}
	}
]).controller("SaleCtrl", ["$scope", "$timeout", "$log", "$http", "$location", "$rootScope", "Flash", "Session", "Domain",
	function(a, b, d, c, e, f, g, h, k) {
		a.login = f.isLogin;
		a.steps = "one two three four five six".split(" ");
		a.step = 0;
		a.busy = !1;
		a.form = {};
		a.results = [];
		a.tags = [];
		a.isFirstStep = function() {
			return 0 === a.step
		};
		a.isLastStep = function() {
			return a.step === a.steps.length - 1
		};
		a.CurrentStep = function() {
			return a.steps[a.step]
		};
		a.Label = function() {
			return a.isLastStep() ? "\u0110\u0103ng tin" : "Ti\u1ebfp theo"
		};
		a.Previous = function() {
			a.step -= a.isFirstStep() ? 0 : 1
		};
		a.Next = function() {
			a.isLastStep() ? a.submit() : (a.step += 1, 1 == a.step && (a.Tags(), a.form.images = JSON.parse(h.get("files"))))
		};
		a.center = {
			latitude: 10.823099,
			longitude: 106.629664
		};
		a.zoom = 15;
		a.markers = [];
		a.markerLat = null;
		a.markerLng = null;
		a.addMarker = function() {
			a.markers.push({
				latitude: parseFloat(a.markerLat),
				longitude: parseFloat(a.markerLng)
			});
			a.markerLat = null;
			a.markerLng = null
		};
		a.geolocationAvailable = navigator.geolocation ? !0 : !1;
		a.checkin = function() {
			a.geolocationAvailable && navigator.geolocation.getCurrentPosition(function(b) {
				a.center = {
					latitude: b.coords.latitude,
					longitude: b.coords.longitude
				};
				a.position = {
					coords: a.center
				};
				a.markers = [];
				a.markers.push(a.center);
				a.markerLat = null;
				a.markerLng = null;
				a.$apply()
			}, function() {})
		};
		a.gmap = function(b) {
			a.center = {
				latitude: b.map[0],
				longitude: b.map[1]
			};
			a.form.local = b.local;
			if (0 < b.tag.length)
				for (var c = 0; c < b.tag.length; c++) a.form.tag.push(b.tag[c]);
			b.check && (a.markers = [], a.markers.push(a.center))
		};
		a.Tags = function() {
			return c.post(k + "/api/message/tags.html", {
				content: a.form.message
			}).success(function(b) {
				a.tags = b.tags
			})
		};
		a.toggle = function(b) {
			var c = a.form.tag.indexOf(b); - 1 < c ? a.form.tag.splice(c, 1) : a.form.tag.push(b)
		};
		a.suggests = function() {
			var b = a.form.address;
			1 < b.length ? a.busy || (a.busy = !0, c.post(k + "/api/address.html", {
				address: b
			}).success(function(b) {
				a.results = b.results;
				a.busy = !1
			}).error(function() {
				a.busy = !1
			})) : a.results = []
		};
		a.capslock = function(a) {
			var b =
				0;
			for (i = 0; i < a.length; i++) 65 <= a[i].charCodeAt(a[i]) && 90 >= a[i].charCodeAt(a[i]) && b++;
			return 15 > b / a.length * 100
		};
		a.submit = function() {
			a.markers.length && (a.form.map = a.markers[0].latitude + ", " + a.markers[0].longitude);
			if ("undefined" != typeof a.form.message && 20 <= a.form.message.length) {
				if (a.capslock(a.form.message)) return c.post(k + "/api/message/create.html", a.form).success(function(a) {
					g.show({
						type: "success",
						msg: "B\u1ea1n \u0111\u00e3 \u0111\u0103ng tin th\u00e0nh c\u00f4ng."
					});
					b(function() {
						e.path("#/post/" +
							a.message.id + ".html")
					}, 500);
					h.unset("files")
				}).error(function(b) {
					a.step = 0;
					g.show({
						type: "danger",
						msg: b.flash
					})
				});
				g.show({
					type: "danger",
					msg: "N\u1ed9i dung qu\u00e1 nhi\u1ec1u k\u00fd t\u1ef1 vi\u1ebft hoa."
				})
			} else g.show({
				type: "danger",
				msg: "N\u1ed9i dung qu\u00e1 ng\u1eafn, \u00edt nh\u1ea5t 20 k\u00fd t\u1ef1."
			});
			a.step = 0
		}
	}
]).controller("WelcomeCtrl", ["$scope",
	function(a) {}
]).controller("GroupCtrl", ["$scope", "$timeout", "$log", "$http", "$location", "$rootScope", "Flash", "Domain",
	function(a, b, d, c, e, f, g,
		h) {
		a.login = f.isLogin;
		a.steps = "one two three four five six seven".split(" ");
		a.step = 0;
		a.busy = !1;
		a.form = {};
		a.results = [];
		a.tags = [];
		a.isFirstStep = function() {
			return 0 === a.step
		};
		a.isLastStep = function() {
			return a.step === a.steps.length - 1
		};
		a.CurrentStep = function() {
			return a.steps[a.step]
		};
		a.Label = function() {
			return a.isLastStep() ? "T\u1ea1o \u0111\u1ecba danh" : "Ti\u1ebfp theo"
		};
		a.Previous = function() {
			a.step -= a.isFirstStep() ? 0 : 1
		};
		a.Next = function() {
			a.isLastStep() ? a.submit() : (1 === a.step && a.Exist(), a.step += 1)
		};
		a.center = {
			latitude: 10.823099,
			longitude: 106.629664
		};
		a.zoom = 15;
		a.markers = [];
		a.markerLat = null;
		a.markerLng = null;
		a.addMarker = function() {
			a.markers.push({
				latitude: parseFloat(a.markerLat),
				longitude: parseFloat(a.markerLng)
			});
			a.markerLat = null;
			a.markerLng = null
		};
		a.geolocationAvailable = navigator.geolocation ? !0 : !1;
		a.checkin = function() {
			a.geolocationAvailable && navigator.geolocation.getCurrentPosition(function(b) {
				a.center = {
					latitude: b.coords.latitude,
					longitude: b.coords.longitude
				};
				a.position = {
					coords: a.center
				};
				a.markers = [];
				a.markers.push(a.center);
				a.$apply()
			}, function() {})
		};
		a.gmap = function(b) {
			a.center = {
				latitude: b.map[0],
				longitude: b.map[1]
			};
			a.form.local = b.local;
			b.check && (a.markers = [], a.markers.push(a.center))
		};
		a.Tags = function(b) {
			return c.post(h + "/api/message/tags.html", {
				content: b
			}).success(function(b) {
				a.tags = b.tags
			})
		};
		a.Exist = function() {
			return c.post(h + "/api/group/tags.html", {
				keyword: a.form.name
			}).success(function(b) {
				a.items = b.results;
				a.form.subdomain = b.slug;
				a.Domain()
			})
		};
		a.Domain = function() {
			if (2 < a.form.subdomain.length) return c.post(h + "/api/group/domain.html", {
				domain: a.form.subdomain
			}).success(function(b) {
				a.success = 0 === b.results.length ? !0 : !1
			});
			a.success = !1
		};
		a.toggle = function(b) {
			var c = a.form.tag.indexOf(b); - 1 < c ? a.form.tag.splice(c, 1) : a.form.tag.push(b)
		};
		a.suggests = function() {
			var b = a.form.local;
			1 < b.length ? a.busy || (a.busy = !0, c.post(h + "/api/address.html", {
				address: b,
				group: !0
			}).success(function(b) {
				a.results = b.results;
				a.busy = !1
			}).error(function() {
				a.busy = !1
			})) : a.results = []
		};
		a.submit = function() {
			a.markers.length && (a.form.map = a.markers[0].latitude + ", " + a.markers[0].longitude);
			if ("undefined" != typeof a.form.local) return c.post(h + "/api/group/create.html", a.form).success(function(a) {
				g.show({
					type: "success",
					msg: "B\u1ea1n \u0111\u00e3 t\u1ea1o \u0111\u1ecba danh th\u00e0nh c\u00f4ng."
				});
				b(function() {
					e.path("#/tag/" + a.group.slug + ".html")
				}, 1E3)
			}).error(function(b) {
				a.step = 1;
				g.show({
					type: "danger",
					msg: b.flash
				})
			});
			g.show({
				type: "danger",
				msg: "B\u1ea1n c\u1ea7n ph\u1ea3i ch\u1ecdn ph\u01b0\u1eddng x\u00e3, qu\u1eadn huy\u1ec7n cho \u0111\u1ecba danh."
			});
			a.step = 1
		}
	}
]).controller("TagCtrl", ["$scope", "$http", "$routeParams", "TagService", "Auth", "Domain",
	function(a, b, d, c, e, f) {
		a.isRealEstate = !0;
		a.isStatus = !0;
		a.user = e.user();
		a.isSwitch = function(b) {
			b && (a.isStatus || (a.isStatus = !0), a.isRealEstate || (a.isRealEstate = !0));
			return !b
		};
		angular.extend(a, {
			position: {
				coords: {
					latitude: 10.823099,
					longitude: 106.629664
				}
			},
			center: {
				latitude: 0,
				longitude: 0
			},
			markers: [],
			zoom: 15,
			longitude: null,
			latitude: null
		});
		b.post(f + "/api/tag.html", {
			slug: d.tagId
		}).success(function(b) {
			a.item = b.data;
			a.results = new c(a.item.slug);
			a.stats =
				b.stats;
			a.center = {
				latitude: parseFloat(a.item.map[0]),
				longitude: parseFloat(a.item.map[1])
			};
			a.position = {
				coords: {
					latitude: parseFloat(a.item.map[0]),
					longitude: parseFloat(a.item.map[1])
				}
			};
			a.markers.push(a.center)
		}).error(function(b, c) {
			404 === c && (a.item = [])
		})
	}
]).controller("PostCtrl", ["$scope", "$http", "$routeParams", "Auth", "Domain",
	function(a, b, d, c, e) {
		a.login = c.isLoggedIn();
		a.user = c.user();
		a.center = {};
		a.submit = function(d) {
			if (c.isLoggedIn()) return b.post(e + "/api/comment/create.html", {
				msg_id: d,
				comment: a.form.comment
			}).success(function(b) {
				a.item.comments.push(b);
				a.form = {}
			}).error(function(a) {
				alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
			});
			alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
		};
		b.post(e + "/api/message/read.html", {
			id: d.postId
		}).success(function(b) {
			a.item = b;
			a.item.meta.map && (a.center = {
				latitude: parseFloat(a.item.meta.map[0]),
				longitude: parseFloat(a.item.meta.map[1])
			})
		}).error(function(b, c) {
			404 === c && (a.item = [])
		})
	}
]).controller("MapCtrl", ["$scope", "$http", "$routeParams", "Domain",
	function(a, b, d, c) {
		angular.extend(a, {
			position: {
				coords: {
					latitude: 0,
					longitude: 0
				}
			},
			center: {},
			markers: [],
			zoom: 15,
			longitude: null,
			latitude: null
		});
		b.post(c + "/api/message/read.html", {
			id: d.mapId
		}).success(function(b) {
			a.item = b;
			a.item.meta.map && (a.latitude = parseFloat(a.item.meta.map[0]), a.longitude = parseFloat(a.item.meta.map[1]), a.center = {
				latitude: a.latitude,
				longitude: a.longitude
			}, a.position = {
				coords: {
					latitude: a.latitude,
					longitude: a.longitude
				}
			}, a.markers.push(a.center))
		}).error(function(b,
			c) {
			404 === c && (a.item = [])
		})
	}
]).controller("TypeaheadCtrl", ["$scope", "$http", "$timeout", "TagService", "Domain",
	function(a, b, d, c, e) {
		a.results = [];
		a.isRealEstate = !0;
		a.isStatus = !0;
		a.isSwitch = function(b) {
			b && (a.isStatus || (a.isStatus = !0), a.isRealEstate || (a.isRealEstate = !0));
			return !b
		};
		a.search = function() {
			1 < a.keyword.length ? d(function() {
				a.results = new c(a.keyword)
			}, 1E3) : a.results = []
		};
		a.suggests = function(a) {
			return b.post(e + "/search/typeahead.html", {
				keyword: a
			}).then(function(a) {
				return a.data
			})
		}
	}
]).controller("ClassifiedCtrl", ["$scope", "$http", "$location", "SearchService", "Auth", "Domain",
	function(a, b, d, c, e, f) {
		a.isRealEstate = !0;
		a.isStatus = !0;
		a.user = e.user();
		a.isSwitch = function(b) {
			b && (a.isStatus || (a.isStatus = !0), a.isRealEstate || (a.isRealEstate = !0));
			return !b
		};
		a.results = new c;
		b.post(f + "/api/stats.html").success(function(b) {
			a.stats = b.stats
		})
	}
]).controller("ProfileCtrl", ["$scope", "$http", "$routeParams", "SearchService", "Auth", "Domain",
	function(a, b, d, c, e, f) {
		a.myInterval = 6E4;
		a.isRealEstate = !0;
		a.isStatus = !0;
		a.form = {};
		a.user = e.user();
		b.post(f + "/profile.html", {
			username: d.profileId
		}).success(function(b) {
			a.user = b.user;
			a.slides = b.slides;
			a.stats = b.stats;
			a.results = new c({
				uid: b.user.idu
			})
		});
		a.isSwitch = function(b) {
			b && (a.isStatus || (a.isStatus = !0), a.isRealEstate || (a.isRealEstate = !0));
			return !b
		}
	}
]).controller("SliderCtrl", ["$scope", "$http", "Domain",
	function(a, b, d) {
		a.slides = [];
		b.post(d + "/api/slider.html").success(function(b) {
			a.slides = b
		});
		a.direction = "left";
		a.currentIndex = 0;
		a.setSlide = function(b) {
			a.currentIndex = b
		};
		a.isSlide = function(b) {
			return a.currentIndex ===
				b
		};
		a.prev = function() {
			a.direction = "left";
			a.currentIndex = a.currentIndex < a.slides.length - 1 ? ++a.currentIndex : 0
		};
		a.next = function() {
			a.direction = "right";
			a.currentIndex = 0 < a.currentIndex ? --a.currentIndex : a.slides.length - 1
		}
	}
]).controller("ContactCtrl", ["$scope", "$http", "$location", "$timeout", "Flash", "Domain",
	function(a, b, d, c, e, f) {
		a.lastForm = {};
		a.form = {};
		a.disabled = !1;
		a.submit = function(g) {
			a.lastForm = angular.copy(g);
			b.post(f + "/api/contact.html", {
				fullname: a.form.fullname,
				email: a.form.email,
				select: a.form.select,
				message: a.form.message
			}).success(function(b) {
				a.disabled = !0;
				c(function() {
					d.path("#/welcome.html")
				}, 5E3);
				e.show({
					type: "success",
					msg: b.flash
				})
			}).error(function(a) {
				e.show({
					type: "danger",
					msg: a.flash
				})
			})
		};
		a.reset = function() {
			a.form = angular.copy(a.lastForm)
		}
	}
]).controller("FollowCtrl", ["$scope", "$http", "Domain",
	function(a, b, d) {
		b.post(d + "/api/follows.html").success(function(b) {
			a.follows = b
		})
	}
]).controller("CommentsCtrl", ["$scope", "$http", "$routeParams", "Auth", "Flash", "Domain",
	function(a, b, d, c, e, f) {
		a.form = {};
		a.login = c.isLoggedIn();
		a.user = c.user();
		angular.extend(a, {
			position: {
				coords: {
					latitude: 10.823099,
					longitude: 106.629664
				}
			},
			center: {
				latitude: 0,
				longitude: 0
			},
			markers: [],
			zoom: 17,
			longitude: null,
			latitude: null
		});
		a.submit = function(d) {
			if (c.isLoggedIn()) return b.post("/api/comment/create.html", {
				msg_id: d,
				comment: a.form.comment
			}).success(function(b) {
				a.item.comments.push(b);
				a.form = {}
			}).error(function(a) {
				alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
			});
			alert("B\u1ea1n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.")
		};
		b.post(f + "/api/message/read.html", {
			id: d.commentId
		}).success(function(b) {
			a.item = b;
			a.item.meta.map && (a.center = {
				latitude: parseFloat(a.item.meta.map[0]),
				longitude: parseFloat(a.item.meta.map[1])
			}, a.position = {
				coords: {
					latitude: parseFloat(a.item.meta.map[0]),
					longitude: parseFloat(a.item.meta.map[1])
				}
			}, a.markers.push(a.center))
		}).error(function(b, c) {
			404 === c && (a.item = [])
		})
	}
]).controller("LoginCtrl", ["$scope", "$location", "$http", "$filter", "$rootScope", "Auth", "Flash", "Domain",
	function(a, b, d, c, e, f, g, h) {
		a.steps = ["one", "two", "three", "four"];
		a.step = 0;
		a.credentials = {
			user: "",
			password: ""
		};
		a.isFirstStep = function() {
			return 0 === a.step
		};
		a.isLastStep = function() {
			return a.step === a.steps.length - 1
		};
		a.CurrentStep = function() {
			return a.steps[a.step]
		};
		a.NextLabel = function() {
			return a.isLastStep() ? "\u0110\u0103ng nh\u1eadp" : a.isFirstStep() ? "Ti\u1ebfp t\u1ee5c" : "X\u00e1c nh\u1eadn"
		};
		a.Previous = function() {
			a.step = 0
		};
		a.Next =
			function() {
				a.isFirstStep() ? a.email_or_phone() : 3 < a.credentials.password.length && a.login()
		};
		a.email_or_phone = function() {
			d.post(h + "/api/user/status.html", {
				user: a.credentials.user
			}).success(function(b) {
				a.step = a.steps.length - 1;
				a.phone = "phone" == b.user;
				a.email = "email" == b.user
			}).error(function(b, c) {
				404 == c ? "phone" == b.user ? a.step = 1 : "email" == b.user && (a.step = 2) : (a.step = 0, g.show({
					type: "danger",
					msg: "Email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\u00f4ng h\u1ee3p l\u1ec7."
				}))
			})
		};
		a.resetpw = function() {
			f.sendmail(a.credentials).error(function() {
				a.step =
					0
			})
		};
		a.login = function() {
			f.login(a.credentials).success(function(a) {
				a.user.otp ? b.path("#/newpassword.html") : e.isPath ? (b.path(e.isPath), e.isPath = "") : b.path("#/welcome.html")
			}).error(function() {
				a.step = 0
			})
		};
		a.$watch("credentials.user", function() {
			a.credentials.user = c("tel")(a.credentials.user)
		})
	}
]).controller("AccountCtrl", ["$scope", "$http", "$location", "$filter", "Auth", "Flash", "Domain",
	function(a, b, d, c, e, f, g) {
		a.phone = !1;
		a.email = !1;
		a.name = !1;
		a.passwd = !1;
		a.user = e.user();
		a.$watch("form.phone", function() {
			a.form.phone =
				c("tel")(a.form.phone)
		});
		a.verify = function() {
			return b.post(g + "/api/user/verify.html", a.form).success(function(b) {
				f.show({
					type: "success",
					msg: b.flash
				});
				b.phone && (a.phone = !0, a.email = !1);
				b.email && (a.phone = !1, a.email = !0)
			}).error(function(a) {
				f.show({
					type: "danger",
					msg: a.flash
				})
			})
		};
		a.confirm = function() {
			return b.post(g + "/api/user/confirm.html", a.form).success(function(a) {
				f.show({
					type: "success",
					msg: a.flash
				});
				e.update(a.user);
				d.path("#/welcome.html")
			}).error(function(a) {
				f.show({
					type: "danger",
					msg: a.flash
				})
			})
		};
		a.submit = function() {
			if (e.isLoggedIn()) return b.post(g + "/api/user/update.html", a.form).success(function(b) {
				f.show({
					type: "success",
					msg: b.flash
				});
				e.update(b.user);
				a.user = e.user();
				a.name = !1
			}).error(function(b) {
				f.show({
					type: "danger",
					msg: b.flash
				});
				a.user = e.user()
			});
			f.show({
				type: "danger",
				msg: "B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp."
			})
		};
		a.password = function() {
			if (e.isLoggedIn()) {
				if ("undefined" != typeof a.form.password && 6 <= a.form.password.length) return b.post(g + "/api/user/update.html",
					a.form).success(function(b) {
					f.show({
						type: "success",
						msg: b.flash
					});
					e.update(b.user);
					a.passwd = !1
				}).error(function(a) {
					f.show({
						type: "danger",
						msg: a.flash
					})
				});
				f.show({
					type: "danger",
					msg: "M\u1eadt kh\u1ea9u \u00edt nh\u1ea5t 6 k\u00fd t\u1ef1."
				})
			} else f.show({
				type: "danger",
				msg: "B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp."
			})
		}
	}
]).controller("NewPasswordCtrl", ["$scope", "$http", "$location", "Auth", "Flash", "Domain",
	function(a, b, d, c, e, f) {
		a.update = function() {
			if (c.isLoggedIn()) {
				if ("undefined" !=
					typeof a.form.password && 6 <= a.form.password.length) return b.post(f + "/api/user/update.html", a.form).success(function(a) {
					c.update(a.user);
					d.path("#/welcome.html");
					e.show({
						type: "success",
						msg: a.flash
					})
				}).error(function(a) {
					e.show({
						type: "danger",
						msg: a.flash
					})
				});
				e.show({
					type: "danger",
					msg: "M\u1eadt kh\u1ea9u \u00edt nh\u1ea5t 6 k\u00fd t\u1ef1."
				})
			} else e.show({
				type: "danger",
				msg: "B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp, vui l\u00f2ng \u0111\u0103ng nh\u1eadp."
			})
		}
	}
]);